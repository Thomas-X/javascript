{"version":3,"sources":["webpack:///webpack/bootstrap d3ae8e6d9fac4f9ac941","webpack:///./src/index.js","webpack:///./src/classes/Bot.js","webpack:///external \"mongoose\"","webpack:///external \"discord.js\"","webpack:///./src/constants.js","webpack:///./src/commands/index.js","webpack:///./src/commands/poll.js","webpack:///external \"type-check\"","webpack:///external \"dotenv\""],"names":["require","config","bot","process","env","DISCORD_BOT_TOKEN","Bot","constructor","token","_client","Discord","Client","login","on","console","log","user","tag","mongoose","connect","clientMessageListener","func","listen","_token","msg","commandParser","content","err","client","typecheck","_typecheck","typeCheck","deepDiff","a","b","JSON","stringify","mapper","mappingKeys","values","obj","val","o","length","parseAndExecuteCommand","command","args","i","argument","arg","argsCopy","slice","shift","params","execute","cmd","split","DISCORD_BOT_PREFIX","wholeCommandWithoutPrefix","substr","onlyArguments","poll"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d3ae8e6d9fac4f9ac941","import Bot from \"./classes/Bot\";\n\nrequire('dotenv').config()\n\n\nexport const bot = new Bot(process.env.DISCORD_BOT_TOKEN);\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import mongoose from \"mongoose\";\nimport Discord from 'discord.js';\nimport {commandParser} from \"../constants\";\n\nexport default class Bot {\n    constructor(token) {\n        this._client = new Discord.Client();\n        this._client.login(token);\n        this._client.on('ready', () => {\n            console.log(`Logged in as ${this._client.user.tag}`)\n        })\n        mongoose.connect('mongodb://localhost:27017/discord-bot')\n        this.clientMessageListener = (func) => this._client.on('message', func);\n        this.listen();\n        this._token = token;\n    }\n\n    listen() {\n        try {\n            this.clientMessageListener(async (msg) => {\n                await commandParser(msg.content);\n            })\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    get client() {\n        return this._client;\n    }\n\n    get token() {\n        return this._token;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Bot.js","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"discord.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"discord.js\"\n// module id = 4\n// module chunks = 0","import commands from './commands/index';\nimport _typecheck from 'type-check';\n\nconst typecheck = _typecheck.typeCheck;\n\nexport const deepDiff = (a, b) => JSON.stringify(a) === JSON.stringify(b);\n\nexport const mapper = (mappingKeys, values) => {\n    const obj = {};\n    for (const val of mappingKeys) {\n        for (let o = 0; o < values.length; o++) {\n            obj[val] = values[o];\n        }\n    }\n    return obj;\n}\n\nexport const parseAndExecuteCommand = async (command, args) => {\n    let obj = {};\n    for (let i = 0; i < command.args.length; i++) {\n        const argument = command.args[i];\n\n        // If is 'advanced' command, like !poll create <params>\n        if (typecheck('Object', argument)) {\n            // if the command is equal to the current args, shift the array so we only have the args and map that.\n            // could use recursion but adds too much complexity, but would allow for !poll create my thing <params>\n            if (args[0] === argument.arg) {\n                const argsCopy = args.slice();\n                argsCopy.shift();\n                obj = mapper(argument.params, argsCopy);\n            }\n            break;\n        }\n\n        // If is simple command, use index of current argument for multiple args\n        if (typecheck('String', argument)) {\n            obj[argument] = args[i];\n        }\n    }\n    await command.execute(obj);\n}\n\nexport const commandParser = async (cmd) => {\n    if (cmd.split('')[0] === process.env.DISCORD_BOT_PREFIX) {\n        for (const command of commands) {\n            const wholeCommandWithoutPrefix = cmd.substr(1).split(' ');\n            if (command.cmd === wholeCommandWithoutPrefix[0]) {\n                const onlyArguments = wholeCommandWithoutPrefix.slice();\n                onlyArguments.shift();\n                await parseAndExecuteCommand(command, onlyArguments);\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","import poll from \"./poll\";\n\nexport default [\n    {\n        cmd: 'poll',\n        args: [{ arg: 'create', params: ['name'] }, 'dd'],\n        execute: poll\n    }\n]\n\n\n\n// WEBPACK FOOTER //\n// ./src/commands/index.js","export default async (args) => {\n    console.log('bla', args);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/commands/poll.js","module.exports = require(\"type-check\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"type-check\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}